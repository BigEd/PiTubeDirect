GKAA - PDP 11/04 - BASIC CPU TEST
=================================

This is the first diagnostic test that Ed and I used.

Found the following bugs:
971c8bf1 PDP-11 Co Pro - fix ROR incorrectly setting Z flag
31aa04d3 PDP-11 Co Pro - fix SWAB incorrectly setting Z flag
a41816fd PDP-11 Co Pro - fix SUB incorrectly setting V flag
ef26c2c3 PDP-11 Co Pro - fix SBC incorrectly setting C and Z flags
02eaf775 PDP-11 Co Pro - fix ROR/ASR incorrectly setting V flag
26a45f3f PDP-11 Co Pro - fix incorrect branches (C xor different to C++)

After fixing these, the test passes with:

END OF DGKAA
END OF DGKAA
END OF DGKAA
...

VKAA - PDP 11/03 (LSI-11) - BASIC CPU TEST
==========================================

After Ed left moved on to this diagnostic.

Found the following bugs:

fbe3d5ee PDP-11 Co Pro - fixed MARK instruction
1dcebb00 PDP-11 Co Pro - fix INC/INCB incorrectly setting V flag
079b658f PDP-11 Co Pro - fix NEGB incorrectly setting V flag
fc9fa831 PDP-11 Co Pro - fix ADCB incorrectly setting C and V flags
1b21667c PDP-11 Co Pro - fix SBCB incorrectly setting V flag
214884b8 PDP-11 Co Pro - enable DEBUG in test harness
1b269956 PDP-11 Co Pro - fix SXT/SXTB incorrectly setting Z and V flags
e0c918e3 PDP-11 Co Pro - added MTPS/MFPS to emulator
0ed16d6b PDP-11 Co Pro - test harness allows unaligned accesses

After fixing these, the test passes with:

END PASS
END PASS
END PASS
...

VKAB - PDP 11/03 (LSI-11) - EIS INSTRUCTION TEST
================================================

This test has contains 310 (octal) test cases.

It currently produces the following output, which are failures:

   000746   000001   
   003522   000042   
   003522   000042   
   003556   000044   
   003722   000046   
   003756   000050   
   004122   000052   
   004156   000054   
   003522   000042   
   003556   000044   
   003722   000046   
   003756   000050   
   004122   000052   
   004156   000054   
   003522   000042   
   003556   000044   
   003722   000046   
   003756   000050   
   004122   000052   
   004156   000054   
   003522   000042   
   003556   000044   
   003722   000046   
   003756   000050   
   004122   000052   
   004156   000054   
   003522   000042   
   003556   000044   
   003722   000046   
   003756   000050   
   004122   000052   
   004156   000054   
   003522   000042   
   003556   000044   
   003722   000046   
   003742   000047   
   004122   000052   
   004142   000053   
   003522   000042   
   003542   000043   
   003722   000046   
   003742   000047   
   004122   000052   
   004142   000053   
   003522   000042   
   003542   000043   
   003722   000046   
   003742   000047   
   004122   000052   
   004142   000053   
   003522   000042   
   003542   000043   
   003722   000046   
   003742   000047   
   004122   000052   
   004142   000053   
   003522   000042   
   003542   000043   
   003722   000046   
   003742   000047   
   004122   000052   
   004142   000053   
   003522   000042   
   003542   000043   
   003722   000046   
   003756   000050   
   004122   000052   
   004142   000053   
   004156   000054   
   003522   000042   
   003542   000043   
   003556   000044   
   003722   000046   
   003742   000047   
   003756   000050   
   003722   000046   
   004122   000052   
   005176   000062   
   005274   000065   
   005406   000071   
   005466   000073   
   005564   000076   
   005600   000077   
   005662   000101   
   005676   000102   
   005756   000104   
   006102   000110   
   006116   000111   
   006132   000112   
   006204   000113   
   006220   000114   
   006234   000115   
   006306   000116   
   006322   000117   
   006336   000120   
   006406   000121   
   006422   000122   
   006436   000123   
   006506   000124   
   006522   000125   
   006536   000126   
   006606   000127   
   006622   000130   
   006636   000131   
   006710   000132   
   006724   000133   
   006740   000134   
   007012   000135   
   007026   000136   
   007042   000137   
   007112   000140   
   007126   000141   
   007142   000142   
   007212   000143   
   007226   000144   
   007242   000145   
   007306   000146   
   007402   000151   
   007476   000154   
   007766   000165   
   010162   000173   
   010642   000212   
   010736   000215   
   011132   000223   
   011324   000231   
   013542   000326   
   013760   000336   
   013774   000337   
   014010   000340   
   014070   000342   
   014104   000343   
   014120   000344   
   014416   000356   
   014432   000357   
   014446   000360   
   014642   000366

Then, in TEST:307 TEST THAT EIR ABORTS PROPERLY, it gets stuck in this
infinite loop:

016326 : 052704 000001        : BIS #000001, R4
016332 : 072427 000020        : ASH R4, #000020
016336 : 000773               : BR  016326

It's waiting for a serial interrupt that never arrives, because out
test harness does not emulate interrupts.

The first failure is after this test:

000674 : 005037 000442        : CLR @#000442
000700 : 010701               : MOV PC, R1
000702 : 013700 000434        : MOV @#000434, R0
000706 : 032737 000001 000406 : BIT #000001, @#000406
000714 : 001004               : BNE 000726
000716 : 013701 000436        : MOV @#000436, R1
000722 : 072001               : ASH R0, R1
000724 : 000402               : BR  000732
000726 : 072067 177504        : ASH R0, 000436
000732 : 106737 000432        : MFPS @#000432
000736 : 123737 000442 000432 : CMPB @#000442, @#000432
000744 : 001403               : BEQ 000754
000746 : 004767 016142        : JSR PC, 017114

It seems to be messing around with something called the APT-PDP11 diagnostic interface.

Source for this test is here:
http://files.retrocmp.com/fichescanner/bw/gh/AH-S366B-MC__11-03__LSI-11_EIS_INST_TEST__CVKABB0__(C)75-81.pdf

FKAA - PDP 11/34 - BASIC INSTRUCTION TEST
=========================================

This test suite has 264 (octal) test cases.

After fixing the following bugs:

fb255892 PDP-11 Co Pro - sign extend MFPS if da is a register
fb1b21aa PDP-11 Co Pro - don't allow setting of T bit in PS via @#177776

The test suite fails in:
    TEST 254 - TEST INDEPENDENCE OF USER AND KERNEL MODE R6's

FKAB - PDP 11/34 - TRAPS TEST
=============================

This test suite has 113 (octal) test cases.

The test suite fail in:
    TEST 5 TEST THAT A TRAP OCCURS ON A RESERVED INSTRUCTION

FKAC - PDP 11/34 - EIS INSTRUCTION TEST 
=======================================

Lots of failures....

   001006   000001   
   003562   000042   
   003562   000042   
   003616   000044   
   003762   000046   
   004016   000050   
   004162   000052   
   004216   000054   
   003562   000042   
   003616   000044   
   003762   000046   
   004016   000050   
   004162   000052   
   004216   000054   
   003562   000042   
   003616   000044   
   003762   000046   
   004016   000050   
   004162   000052   
   004216   000054   
   003562   000042   
   003616   000044   
   003762   000046   
   004016   000050   
   004162   000052   
   004216   000054   
   003562   000042   
   003616   000044   
   003762   000046   
   004016   000050   
   004162   000052   
   004216   000054   
   003562   000042   
   003616   000044   
   003762   000046   
   004002   000047   
   004162   000052   
   004202   000053   
   003562   000042   
   003602   000043   
   003762   000046   
   004002   000047   
   004162   000052   
   004202   000053   
   003562   000042   
   003602   000043   
   003762   000046   
   004002   000047   
   004162   000052   
   004202   000053   
   003562   000042   
   003602   000043   
   003762   000046   
   004002   000047   
   004162   000052   
   004202   000053   
   003562   000042   
   003602   000043   
   003762   000046   
   004002   000047   
   004162   000052   
   004202   000053   
   003562   000042   
   003602   000043   
   003762   000046   
   004016   000050   
   004162   000052   
   004202   000053   
   004216   000054   
   003562   000042   
   003602   000043   
   003616   000044   
   003762   000046   
   004002   000047   
   004016   000050   
   003762   000046   
   004162   000052   
   005236   000062   
   005334   000065   
   005446   000071   
   005526   000073   
   005624   000076   
   005640   000077   
   005722   000101   
   005736   000102   
   006016   000104   
   006142   000110   
   006156   000111   
   006172   000112   
   006244   000113   
   006260   000114   
   006274   000115   
   006346   000116   
   006362   000117   
   006376   000120   
   006446   000121   
   006462   000122   
   006476   000123   
   006546   000124   
   006562   000125   
   006576   000126   
   006646   000127   
   006662   000130   
   006676   000131   
   006750   000132   
   006764   000133   
   007000   000134   
   007052   000135   
   007066   000136   
   007102   000137   
   007152   000140   
   007166   000141   
   007202   000142   
   007252   000143   
   007266   000144   
   007302   000145   
   007346   000146   
   007442   000151   
   007536   000154   
   010026   000165   
   010222   000173   
   010702   000212   
   010776   000215   
   011172   000223   
   011364   000231   
   013602   000326   
   014020   000336   
   014034   000337   
   014050   000340   
   014130   000342   
   014144   000343   
   014160   000344   
   014456   000356   
   014472   000357   
   014506   000360   
   014702   000366   
END PASS

KKAA - PDP 11/44 - BASIC INSTRUCTION TEST
=========================================

This test suite has 340 (octal) test cases.

The test suite fail in:
    TEST 236 - TEST INDEPENDENCE OF USER/SUPER/KERNEL MODE R6, R6


